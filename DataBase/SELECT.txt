/*
SELECT 문
   기본 형태
SELECT * | {[DISTINCT] column| 표현식 [별칭],...}
FROM table;
*/

/*
1. 모든 열 선택
SELECT 뒤에 *을 사용하여 테이블에 있는 데이터의 모든 열을 표시 할수 있다.
*/
-- 모든 table 출력 tab > table의 줄임말
select * 
from tab; 

-- Y_DEPT 테이블의 모든 열에 모든 행을 표시
SELECT *
FROM Y_DEPT;

-- 열의 이름을 나열하여 테이블의 열을 표시할 수 있다.
select dept_id, dept_name, loc_id, mgr_id
from y_dept;

-- Y_DEPT 테이블의 정보 출력
desc y_dept
describe y_dept

/*
2. 특정 열의 선택
SELECT 문을 사용할 때 열 이름을 쉼표로 구분하여 테이블의 특정 열을 표시 가능
*/
-- Y_DEPT 테이블의 모든 부서번호와 위치번호를 표시
select dept_id, loc_id
from y_dept;

/*
3. 중복행의 제거
SELECT의 결과는 기본적으로 중복 행을 제거하지 않고 결과를 표시
DISTINCT > 중복제거, 절에 한번만 사용가능 
*/
-- y_emp 테이블에서 모든 사원의 부서번호를 표시
SELECT distinct dept_id
from y_emp;

-- DISTINCT 다음에 여러 열을 지정하면 열 조합 값에 대한 중복을 제거
SELECT distinct dept_id, position
from y_emp;

/*
4. 산술식의 사용
데이터 표현 방식 수정, 계산을 수행할 경우 산술 연산자 사용 가능 ( * / + - )
FROM 절을 제외한 SQL문에 사용 가능하며 괄호를 포함한 사칙연산과 같은 우선순위를 가짐
*/

-- 출력 결과에 급여 및 300$ 인상된 급여를 SALARY+300으로 표시
SELECT emp_id, emp_name, salary, salary+30
from y_emp;

-- 사원이름, 급여, 연간 총 수입 표현
select emp_name, salary, 12*(salary+300)
from y_emp;

/*
5. 날짜 데이터의 연산
날짜 데이터도 산술 연산자를 통하여 정수를 더하거나 뺄수 있다.
이때의 정수는 일 수에 해당
*/
-- 사원의 입사일과 입사일로부터 30일 후의 날짜를 사원번호와 함께 표시
SELECT emp_id, hiredate, HIREDATE+30
FROM Y_EMP;

-- SYSDATE 사용하여 현재의 날짜 표시
-- 날짜 데이터는 기본적으로 국가별로 다름
-- dual > 더미테이블
SELECT SYSDATE FROM dual;
SELECT USER FROM dual;

-- 날짜 표현 형식을 변경
-- NLS (National Language Support)
ALTER SESSION SET NLS_DATE_FORMAT='YYYY-MM-DD HH24:MI:SS';
ALTER SESSION SET NLS_DATE_FORMAT='mon/day/yyyy';
SELECT SYSDATE FROM DUAL;

-- 날짜에 정수를 더하는 것은 일 수에 해당됨으로 시간 이하의 계산은
-- 24시간으로 환산하여 계산하여야 한다.
-- 현재로부터 3시간 후 / 40분 후의 시간 구하기
SELECT SYSDATE, SYSDATE+3/24, SYSDATE+40/(24*60)
FROM DUAL;

/*
NULL: 할당할수 없는 값, 알 수 없는 값
0은 숫자 공백은 하나의 문자이다.
*/
SELECT EMP_ID, EMP_NAME, COMM
FROM Y_EMP;


-- NULL을 포함한 계산은 NULL이 된다.
SELECT EMP_ID, SALARY, COMM,
       (SALARY*12) + (SALARY*COMM)
FROM Y_EMP;

/*
7. 열 머리글과 열 별칭(Column Alias)
SELECT문의 결과에서 열 머리글은 기본적으로 대문자 표시
표현식에 의해 생성된 열은 표현식 자체가 열의 이름으로 사용 ex)'SALARY*12', 'HIREDATE+30'
이때 출력결과를 이해하기 쉽도록 다른 이름으로 변경 가능 ==> 이를 별칭(Alias)라고 한다.
*/
-- 기본적으로 대문자로 표시
-- 공백, 특수문자, 대소문자 구분할 경우에는 큰 따옴표(" ") 사용
SELECT EMP_NAME "NAME", COMM AS commission, SALARY *12 "Annual Salary"
FROM Y_EMP;

/*
8. 연결연산자 (||) 와 Q연산자
*/
-- || > 연결연산자 좌우의 열이 결합되어 하나의 열로 출력
SELECT EMP_NAME || POSITION AS "Employee's Position"
FROM y_emp;

-- || > 연결연산자 + ' ' > 사이에 공백 등 다른 리터럴 추가 가능
SELECT EMP_NAME ||' '|| POSITION AS "Employee's Position"
FROM y_emp;

-- Q연산자를 통해  ' '를 보다 편하게 사용 가능('는 표현이 힘듬)
SELECT EMP_NAME || q'['S sALARY : ]' || SALARY AS "Employee's salarty"
from y_emp;